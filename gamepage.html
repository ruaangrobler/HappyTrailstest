<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Happy Trails â€“ Game</title>
<style>
	html, body { margin:0; padding:0; width:100%; height:100%; overflow:hidden; }
	iframe {
		position:absolute;
		top:0; left:0;
		width:100%;
		height:100%;
		border:none;
	}
</style>
</head>
<body>
<iframe id="gameFrame" src="game/index.html"></iframe>

<script>
	// Listen for Godot gameClosed signal
	window.addEventListener("message", function(event){
		if(event.data && event.data.type === "gameClosed"){
			console.log("Game requested close.");
			// notify opener
			if(window.opener && !window.opener.closed){
				window.opener.postMessage({ type: "gameClosed" }, "*");
			}
			// close self
			window.close();
		}
	});
</script>
<script>
	window.addEventListener("message", function(event) {
		if (event.data && event.data.type === "copyCode") {
			const code = event.data.code;

			// Use Clipboard API
			if (navigator.clipboard && navigator.clipboard.writeText) {
				navigator.clipboard.writeText(code).then(() => {
					console.log("Code copied to clipboard:", code);
					alert("Code copied: " + code); // optional feedback
				}).catch(err => {
					console.error("Clipboard error:", err);
				});
			} else {
				// Fallback (very old browsers)
				const input = document.createElement("input");
				input.value = code;
				document.body.appendChild(input);
				input.select();
				document.execCommand("copy");
				document.body.removeChild(input);
				alert("Code copied: " + code);
			}
		}
	});
</script>

</body>
</html>
